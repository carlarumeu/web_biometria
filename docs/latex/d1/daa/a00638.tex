\doxysubsection{Referencia del archivo medicion\+Service.\+js}
\hypertarget{a00638}{}\label{a00638}\index{medicionService.js@{medicionService.js}}
\doxysubsubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{a01195_a855a20a52f797d443a00308230dc8f43_a855a20a52f797d443a00308230dc8f43}{import}} \mbox{\hyperlink{a00533_a6292ea809b7ad5ee57995c471d3aaa0d_a6292ea809b7ad5ee57995c471d3aaa0d}{pool}} from config \mbox{\hyperlink{a00215_af670582b5c8da7efc1bd7486225bcec7_af670582b5c8da7efc1bd7486225bcec7}{db}} \mbox{\hyperlink{a00638_aa10fb6863dca783341cf3ea63763a6fa_aa10fb6863dca783341cf3ea63763a6fa}{js}}
\item 
\mbox{\hyperlink{a01195_a0c82af93735dc153158c065171f9ee0f_a0c82af93735dc153158c065171f9ee0f}{export}} \mbox{\hyperlink{a01195_a170ccbec74a0565bcf6e232ec10ad9e5_a170ccbec74a0565bcf6e232ec10ad9e5}{const}} \mbox{\hyperlink{a00638_a5584509a73694d908bebf97464c0c255_a5584509a73694d908bebf97464c0c255}{obtener\+Mediciones}}
\begin{DoxyCompactList}\small\item\em @function obtener\+Mediciones @async \end{DoxyCompactList}\item 
\mbox{\hyperlink{a01195_a0c82af93735dc153158c065171f9ee0f_a0c82af93735dc153158c065171f9ee0f}{export}} \mbox{\hyperlink{a01195_a170ccbec74a0565bcf6e232ec10ad9e5_a170ccbec74a0565bcf6e232ec10ad9e5}{const}} \mbox{\hyperlink{a00638_af1e046d467b6f02e2699fc8e3ba539aa_af1e046d467b6f02e2699fc8e3ba539aa}{enviar\+Medicion}}
\begin{DoxyCompactList}\small\item\em @function enviar\+Medicion @async \end{DoxyCompactList}\item 
\mbox{\hyperlink{a01195_a0c82af93735dc153158c065171f9ee0f_a0c82af93735dc153158c065171f9ee0f}{export}} \mbox{\hyperlink{a01195_a170ccbec74a0565bcf6e232ec10ad9e5_a170ccbec74a0565bcf6e232ec10ad9e5}{const}} \mbox{\hyperlink{a00638_a9e697b665d6ba0ad8418337fe2a2d91a_a9e697b665d6ba0ad8418337fe2a2d91a}{obtener\+Ultima\+Medicion}}
\begin{DoxyCompactList}\small\item\em @function obtener\+Ultima\+Medicion @async \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsection{Documentación de variables}
\Hypertarget{a00638_af1e046d467b6f02e2699fc8e3ba539aa_af1e046d467b6f02e2699fc8e3ba539aa}\index{medicionService.js@{medicionService.js}!enviarMedicion@{enviarMedicion}}
\index{enviarMedicion@{enviarMedicion}!medicionService.js@{medicionService.js}}
\doxyparagraph{\texorpdfstring{enviarMedicion}{enviarMedicion}}
{\footnotesize\ttfamily \label{a00638_af1e046d467b6f02e2699fc8e3ba539aa_af1e046d467b6f02e2699fc8e3ba539aa} 
\mbox{\hyperlink{a01195_a0c82af93735dc153158c065171f9ee0f_a0c82af93735dc153158c065171f9ee0f}{export}} \mbox{\hyperlink{a01195_a170ccbec74a0565bcf6e232ec10ad9e5_a170ccbec74a0565bcf6e232ec10ad9e5}{const}} enviar\+Medicion}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ (medicion)\ =>\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ \{\ medida,\ lugar,\ tipo\_gas,\ hora\ \}\ =\ medicion;}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}}\ =\ \textcolor{stringliteral}{'INSERT\ INTO\ mediciones\ (medida,\ lugar,\ tipo\_gas,\ hora)\ VALUES\ (?,\ ?,\ ?,\ ?)'};}
\DoxyCodeLine{\ \ \mbox{\hyperlink{a01195_a222943fe334ed72f2374717e19f6eba9_a222943fe334ed72f2374717e19f6eba9}{await}}\ \mbox{\hyperlink{a00533_a6292ea809b7ad5ee57995c471d3aaa0d_a6292ea809b7ad5ee57995c471d3aaa0d}{pool}}.query(\mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}},\ [medida,\ lugar,\ tipo\_gas,\ hora]);}
\DoxyCodeLine{\}}

\end{DoxyCode}


@function enviar\+Medicion @async 


\begin{DoxyParams}{Parámetros}
{\em \{\+Object\}} & medicion -\/ Objeto que contiene los datos de la medición a insertar. \\
\hline
{\em \{number\}} & medicion.\+medida -\/ Valor de la medición. \\
\hline
{\em \{string\}} & medicion.\+lugar -\/ Lugar de la medición. \\
\hline
{\em \{string\}} & medicion.\+tipo\+\_\+gas -\/ Tipo de gas de la medición. \\
\hline
{\em \{string\}} & medicion.\+hora -\/ Hora en la que se realizó la medición. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
\{Promise$<$void$>$\} 
\end{DoxyReturn}

\begin{DoxyExceptions}{Excepciones}
{\em \{\+Error\}} & Si ocurre un error durante la inserción en la base de datos. \\
\hline
\end{DoxyExceptions}


Definición en la línea \mbox{\hyperlink{a00638_source_l00061}{61}} del archivo \mbox{\hyperlink{a00638_source}{medicion\+Service.\+js}}.

\Hypertarget{a00638_aa10fb6863dca783341cf3ea63763a6fa_aa10fb6863dca783341cf3ea63763a6fa}\index{medicionService.js@{medicionService.js}!js@{js}}
\index{js@{js}!medicionService.js@{medicionService.js}}
\doxyparagraph{\texorpdfstring{js}{js}}
{\footnotesize\ttfamily \label{a00638_aa10fb6863dca783341cf3ea63763a6fa_aa10fb6863dca783341cf3ea63763a6fa} 
\mbox{\hyperlink{a01195_a855a20a52f797d443a00308230dc8f43_a855a20a52f797d443a00308230dc8f43}{import}} \mbox{\hyperlink{a00533_a6292ea809b7ad5ee57995c471d3aaa0d_a6292ea809b7ad5ee57995c471d3aaa0d}{pool}} from config \mbox{\hyperlink{a00215_af670582b5c8da7efc1bd7486225bcec7_af670582b5c8da7efc1bd7486225bcec7}{db}} js}



Definición en la línea \mbox{\hyperlink{a00638_source_l00001}{1}} del archivo \mbox{\hyperlink{a00638_source}{medicion\+Service.\+js}}.

\Hypertarget{a00638_a5584509a73694d908bebf97464c0c255_a5584509a73694d908bebf97464c0c255}\index{medicionService.js@{medicionService.js}!obtenerMediciones@{obtenerMediciones}}
\index{obtenerMediciones@{obtenerMediciones}!medicionService.js@{medicionService.js}}
\doxyparagraph{\texorpdfstring{obtenerMediciones}{obtenerMediciones}}
{\footnotesize\ttfamily \label{a00638_a5584509a73694d908bebf97464c0c255_a5584509a73694d908bebf97464c0c255} 
\mbox{\hyperlink{a01195_a0c82af93735dc153158c065171f9ee0f_a0c82af93735dc153158c065171f9ee0f}{export}} \mbox{\hyperlink{a01195_a170ccbec74a0565bcf6e232ec10ad9e5_a170ccbec74a0565bcf6e232ec10ad9e5}{const}} obtener\+Mediciones}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ (lugar,\ tipo\_gas,\ desde\_hora,\ hasta\_hora)\ =>\ \{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{a01195_a7bd288ed1cf6b1bfeff2c339b7b90df4_a7bd288ed1cf6b1bfeff2c339b7b90df4}{let}}\ \mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}}\ =\ \textcolor{stringliteral}{'SELECT\ *\ FROM\ mediciones\ WHERE\ 1=1'};}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ params\ =\ [];}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (lugar)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}}\ +=\ \textcolor{stringliteral}{'\ AND\ lugar\ =\ ?'};}
\DoxyCodeLine{\ \ \ \ params.push(lugar);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (tipo\_gas)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}}\ +=\ \textcolor{stringliteral}{'\ AND\ tipo\_gas\ =\ ?'};}
\DoxyCodeLine{\ \ \ \ params.push(tipo\_gas);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (desde\_hora)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}}\ +=\ \textcolor{stringliteral}{'\ AND\ hora\ >=\ ?'};}
\DoxyCodeLine{\ \ \ \ params.push(desde\_hora);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{if}\ (hasta\_hora)\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}}\ +=\ \textcolor{stringliteral}{'\ AND\ hora\ <=\ ?'};}
\DoxyCodeLine{\ \ \ \ params.push(hasta\_hora);}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ [rows]\ =\ \mbox{\hyperlink{a01195_a222943fe334ed72f2374717e19f6eba9_a222943fe334ed72f2374717e19f6eba9}{await}}\ \mbox{\hyperlink{a00533_a6292ea809b7ad5ee57995c471d3aaa0d_a6292ea809b7ad5ee57995c471d3aaa0d}{pool}}.query(\mbox{\hyperlink{a00101_a3934419f0f9a2068c705a0013b77fab3_a3934419f0f9a2068c705a0013b77fab3}{query}},\ params);}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ rows;}
\DoxyCodeLine{\}}

\end{DoxyCode}


@function obtener\+Mediciones @async 


\begin{DoxyParams}{Parámetros}
{\em \{string\}} & \mbox{[}lugar\mbox{]} -\/ Lugar de la medición. \\
\hline
{\em \{string\}} & \mbox{[}tipo\+\_\+gas\mbox{]} -\/ Tipo de gas de la medición. \\
\hline
{\em \{string\}} & \mbox{[}desde\+\_\+hora\mbox{]} -\/ Hora de inicio para el filtro de mediciones. \\
\hline
{\em \{string\}} & \mbox{[}hasta\+\_\+hora\mbox{]} -\/ Hora de fin para el filtro de mediciones. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
\{Promise$<$\+Array$<$\+Object$>$$>$\} Lista de mediciones que cumplen con los filtros especificados. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Excepciones}
{\em \{\+Error\}} & Si ocurre un error durante la consulta a la base de datos. \\
\hline
\end{DoxyExceptions}


Definición en la línea \mbox{\hyperlink{a00638_source_l00019}{19}} del archivo \mbox{\hyperlink{a00638_source}{medicion\+Service.\+js}}.

\Hypertarget{a00638_a9e697b665d6ba0ad8418337fe2a2d91a_a9e697b665d6ba0ad8418337fe2a2d91a}\index{medicionService.js@{medicionService.js}!obtenerUltimaMedicion@{obtenerUltimaMedicion}}
\index{obtenerUltimaMedicion@{obtenerUltimaMedicion}!medicionService.js@{medicionService.js}}
\doxyparagraph{\texorpdfstring{obtenerUltimaMedicion}{obtenerUltimaMedicion}}
{\footnotesize\ttfamily \label{a00638_a9e697b665d6ba0ad8418337fe2a2d91a_a9e697b665d6ba0ad8418337fe2a2d91a} 
\mbox{\hyperlink{a01195_a0c82af93735dc153158c065171f9ee0f_a0c82af93735dc153158c065171f9ee0f}{export}} \mbox{\hyperlink{a01195_a170ccbec74a0565bcf6e232ec10ad9e5_a170ccbec74a0565bcf6e232ec10ad9e5}{const}} obtener\+Ultima\+Medicion}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \textcolor{keyword}{const}\ [rows]\ =\ \mbox{\hyperlink{a01195_a222943fe334ed72f2374717e19f6eba9_a222943fe334ed72f2374717e19f6eba9}{await}}\ \mbox{\hyperlink{a00533_a6292ea809b7ad5ee57995c471d3aaa0d_a6292ea809b7ad5ee57995c471d3aaa0d}{pool}}.query(\textcolor{stringliteral}{'SELECT\ *\ FROM\ mediciones\ ORDER\ BY\ hora\ DESC\ LIMIT\ 1'});}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ rows[0];}
\DoxyCodeLine{\}}

\end{DoxyCode}


@function obtener\+Ultima\+Medicion @async 

\begin{DoxyReturn}{Devuelve}
\{Promise\texorpdfstring{$<$}{<}Object\texorpdfstring{$\vert$}{|}null\texorpdfstring{$>$}{>}\} La última medición registrada, o null si no hay mediciones. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Excepciones}
{\em \{\+Error\}} & Si ocurre un error durante la consulta a la base de datos. \\
\hline
\end{DoxyExceptions}


Definición en la línea \mbox{\hyperlink{a00638_source_l00075}{75}} del archivo \mbox{\hyperlink{a00638_source}{medicion\+Service.\+js}}.

