\doxysection{body-\/parser}
\hypertarget{a00856}{}\label{a00856}\index{body-\/parser@{body-\/parser}}
\label{a00856_autotoc_md141}%
\Hypertarget{a00856_autotoc_md141}%


\href{https://npmjs.org/package/body-parser}{\texttt{ }} \href{https://npmjs.org/package/body-parser}{\texttt{ }} \href{https://github.com/expressjs/body-parser/actions/workflows/ci.yml}{\texttt{ }} \href{https://coveralls.io/r/expressjs/body-parser?branch=master}{\texttt{ }} \href{https://ossf.github.io/scorecard-visualizer/\#/projects/github.com/expressjs/body-parser}{\texttt{ }}

Node.\+js body parsing middleware.

Parse incoming request bodies in a middleware before your handlers, available under the {\ttfamily req.\+body} property.

{\bfseries{Note}} As {\ttfamily req.\+body}\textquotesingle{}s shape is based on user-\/controlled input, all properties and values in this object are untrusted and should be validated before trusting. For example, {\ttfamily req.\+body.\+foo.\+to\+String()} may fail in multiple ways, for example the {\ttfamily foo} property may not be there or may not be a string, and {\ttfamily to\+String} may not be a function and instead a string or other user input.

\href{https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/}{\texttt{ Learn about the anatomy of an HTTP transaction in Node.\+js}}.

{\itshape This does not handle multipart bodies}, due to their complex and typically large nature. For multipart bodies, you may be interested in the following modules\+:


\begin{DoxyItemize}
\item \href{https://www.npmjs.org/package/busboy\#readme}{\texttt{ busboy}} and \href{https://www.npmjs.org/package/connect-busboy\#readme}{\texttt{ connect-\/busboy}}
\item \href{https://www.npmjs.org/package/multiparty\#readme}{\texttt{ multiparty}} and \href{https://www.npmjs.org/package/connect-multiparty\#readme}{\texttt{ connect-\/multiparty}}
\item \href{https://www.npmjs.org/package/formidable\#readme}{\texttt{ formidable}}
\item \href{https://www.npmjs.org/package/multer\#readme}{\texttt{ multer}}
\end{DoxyItemize}

This module provides the following parsers\+:


\begin{DoxyItemize}
\item JSON body parser
\item Raw body parser
\item Text body parser
\item URL-\/encoded form body parser
\end{DoxyItemize}

Other body parsers you might be interested in\+:


\begin{DoxyItemize}
\item \href{https://www.npmjs.org/package/body\#readme}{\texttt{ body}}
\item \href{https://www.npmjs.org/package/co-body\#readme}{\texttt{ co-\/body}}
\end{DoxyItemize}\hypertarget{a00856_autotoc_md142}{}\doxysubsection{\texorpdfstring{Installation}{Installation}}\label{a00856_autotoc_md142}

\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ npm\ install\ body-\/parser}

\end{DoxyCode}
\hypertarget{a00856_autotoc_md143}{}\doxysubsection{\texorpdfstring{API}{API}}\label{a00856_autotoc_md143}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ \mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}\ =\ require(\textcolor{stringliteral}{'body-\/parser'})}

\end{DoxyCode}


The {\ttfamily body\+Parser} object exposes various factories to create middlewares. All middlewares will populate the {\ttfamily req.\+body} property with the parsed body when the {\ttfamily Content-\/\+Type} request header matches the {\ttfamily type} option, or an empty object ({\ttfamily \{\}}) if there was no body to parse, the {\ttfamily Content-\/\+Type} was not matched, or an error occurred.

The various errors returned by this module are described in the errors section.\hypertarget{a00856_autotoc_md144}{}\doxysubsubsection{\texorpdfstring{body\+Parser.\+json(\mbox{[}options\mbox{]})}{body\+Parser.\+json(\mbox{[}options\mbox{]})}}\label{a00856_autotoc_md144}
Returns middleware that only parses {\ttfamily json} and only looks at requests where the {\ttfamily Content-\/\+Type} header matches the {\ttfamily type} option. This parser accepts any Unicode encoding of the body and supports automatic inflation of {\ttfamily gzip} and {\ttfamily deflate} encodings.

\doxylink{a00844}{A} new {\ttfamily body} object containing the parsed data is populated on the {\ttfamily request} object after the middleware (i.\+e. {\ttfamily req.\+body}).\hypertarget{a00856_autotoc_md145}{}\doxysubsubsubsection{\texorpdfstring{Options}{Options}}\label{a00856_autotoc_md145}
The {\ttfamily json} function takes an optional {\ttfamily options} object that may contain any of the following keys\+:\hypertarget{a00856_autotoc_md146}{}\doxysubsubsubsubsection{\texorpdfstring{inflate}{inflate}}\label{a00856_autotoc_md146}
When set to {\ttfamily true}, then deflated (compressed) bodies will be inflated; when {\ttfamily false}, deflated bodies are rejected. Defaults to {\ttfamily true}.\hypertarget{a00856_autotoc_md147}{}\doxysubsubsubsubsection{\texorpdfstring{limit}{limit}}\label{a00856_autotoc_md147}
Controls the maximum request body size. If this is a number, then the value specifies the number of bytes; if it is a string, the value is passed to the \href{https://www.npmjs.com/package/bytes}{\texttt{ bytes}} library for parsing. Defaults to `\textquotesingle{}100kb'\`{}.\hypertarget{a00856_autotoc_md148}{}\doxysubsubsubsubsection{\texorpdfstring{reviver}{reviver}}\label{a00856_autotoc_md148}
The {\ttfamily reviver} option is passed directly to {\ttfamily JSON.\+parse} as the second argument. You can find more information on this argument \href{https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\#Example.3A_Using_the_reviver_parameter}{\texttt{ in the MDN documentation about JSON.\+parse}}.\hypertarget{a00856_autotoc_md149}{}\doxysubsubsubsubsection{\texorpdfstring{strict}{strict}}\label{a00856_autotoc_md149}
When set to {\ttfamily true}, will only accept arrays and objects; when {\ttfamily false} will accept anything {\ttfamily JSON.\+parse} accepts. Defaults to {\ttfamily true}.\hypertarget{a00856_autotoc_md150}{}\doxysubsubsubsubsection{\texorpdfstring{type}{type}}\label{a00856_autotoc_md150}
The {\ttfamily type} option is used to determine what media type the middleware will parse. This option can be a string, array of strings, or a function. If not a function, {\ttfamily type} option is passed directly to the \href{https://www.npmjs.org/package/type-is\#readme}{\texttt{ type-\/is}} library and this can be an extension name (like {\ttfamily json}), a mime type (like {\ttfamily application/json}), or a mime type with a wildcard (like {\ttfamily \texorpdfstring{$\ast$}{*}/\texorpdfstring{$\ast$}{*}} or {\ttfamily \texorpdfstring{$\ast$}{*}/json}). If a function, the {\ttfamily type} option is called as {\ttfamily \doxylink{a00572_a2287243da4967181305b31f0ac827b66_a2287243da4967181305b31f0ac827b66}{fn(req)}} and the request is parsed if it returns a truthy value. Defaults to {\ttfamily application/json}.\hypertarget{a00856_autotoc_md151}{}\doxysubsubsubsubsection{\texorpdfstring{verify}{verify}}\label{a00856_autotoc_md151}
The {\ttfamily verify} option, if supplied, is called as {\ttfamily verify(req, res, buf, encoding)}, where {\ttfamily buf} is a {\ttfamily Buffer} of the raw request body and {\ttfamily encoding} is the encoding of the request. The parsing can be aborted by throwing an error.\hypertarget{a00856_autotoc_md152}{}\doxysubsubsection{\texorpdfstring{body\+Parser.\+raw(\mbox{[}options\mbox{]})}{body\+Parser.\+raw(\mbox{[}options\mbox{]})}}\label{a00856_autotoc_md152}
Returns middleware that parses all bodies as a {\ttfamily Buffer} and only looks at requests where the {\ttfamily Content-\/\+Type} header matches the {\ttfamily type} option. This parser supports automatic inflation of {\ttfamily gzip} and {\ttfamily deflate} encodings.

\doxylink{a00844}{A} new {\ttfamily body} object containing the parsed data is populated on the {\ttfamily request} object after the middleware (i.\+e. {\ttfamily req.\+body}). This will be a {\ttfamily Buffer} object of the body.\hypertarget{a00856_autotoc_md153}{}\doxysubsubsubsection{\texorpdfstring{Options}{Options}}\label{a00856_autotoc_md153}
The {\ttfamily raw} function takes an optional {\ttfamily options} object that may contain any of the following keys\+:\hypertarget{a00856_autotoc_md154}{}\doxysubsubsubsubsection{\texorpdfstring{inflate}{inflate}}\label{a00856_autotoc_md154}
When set to {\ttfamily true}, then deflated (compressed) bodies will be inflated; when {\ttfamily false}, deflated bodies are rejected. Defaults to {\ttfamily true}.\hypertarget{a00856_autotoc_md155}{}\doxysubsubsubsubsection{\texorpdfstring{limit}{limit}}\label{a00856_autotoc_md155}
Controls the maximum request body size. If this is a number, then the value specifies the number of bytes; if it is a string, the value is passed to the \href{https://www.npmjs.com/package/bytes}{\texttt{ bytes}} library for parsing. Defaults to `\textquotesingle{}100kb'\`{}.\hypertarget{a00856_autotoc_md156}{}\doxysubsubsubsubsection{\texorpdfstring{type}{type}}\label{a00856_autotoc_md156}
The {\ttfamily type} option is used to determine what media type the middleware will parse. This option can be a string, array of strings, or a function. If not a function, {\ttfamily type} option is passed directly to the \href{https://www.npmjs.org/package/type-is\#readme}{\texttt{ type-\/is}} library and this can be an extension name (like {\ttfamily bin}), a mime type (like {\ttfamily application/octet-\/stream}), or a mime type with a wildcard (like {\ttfamily \texorpdfstring{$\ast$}{*}/\texorpdfstring{$\ast$}{*}} or {\ttfamily application/\texorpdfstring{$\ast$}{*}}). If a function, the {\ttfamily type} option is called as {\ttfamily \doxylink{a00572_a2287243da4967181305b31f0ac827b66_a2287243da4967181305b31f0ac827b66}{fn(req)}} and the request is parsed if it returns a truthy value. Defaults to {\ttfamily application/octet-\/stream}.\hypertarget{a00856_autotoc_md157}{}\doxysubsubsubsubsection{\texorpdfstring{verify}{verify}}\label{a00856_autotoc_md157}
The {\ttfamily verify} option, if supplied, is called as {\ttfamily verify(req, res, buf, encoding)}, where {\ttfamily buf} is a {\ttfamily Buffer} of the raw request body and {\ttfamily encoding} is the encoding of the request. The parsing can be aborted by throwing an error.\hypertarget{a00856_autotoc_md158}{}\doxysubsubsection{\texorpdfstring{body\+Parser.\+text(\mbox{[}options\mbox{]})}{body\+Parser.\+text(\mbox{[}options\mbox{]})}}\label{a00856_autotoc_md158}
Returns middleware that parses all bodies as a string and only looks at requests where the {\ttfamily Content-\/\+Type} header matches the {\ttfamily type} option. This parser supports automatic inflation of {\ttfamily gzip} and {\ttfamily deflate} encodings.

\doxylink{a00844}{A} new {\ttfamily body} string containing the parsed data is populated on the {\ttfamily request} object after the middleware (i.\+e. {\ttfamily req.\+body}). This will be a string of the body.\hypertarget{a00856_autotoc_md159}{}\doxysubsubsubsection{\texorpdfstring{Options}{Options}}\label{a00856_autotoc_md159}
The {\ttfamily text} function takes an optional {\ttfamily options} object that may contain any of the following keys\+:\hypertarget{a00856_autotoc_md160}{}\doxysubsubsubsubsection{\texorpdfstring{default\+Charset}{default\+Charset}}\label{a00856_autotoc_md160}
Specify the default character set for the text content if the charset is not specified in the {\ttfamily Content-\/\+Type} header of the request. Defaults to {\ttfamily utf-\/8}.\hypertarget{a00856_autotoc_md161}{}\doxysubsubsubsubsection{\texorpdfstring{inflate}{inflate}}\label{a00856_autotoc_md161}
When set to {\ttfamily true}, then deflated (compressed) bodies will be inflated; when {\ttfamily false}, deflated bodies are rejected. Defaults to {\ttfamily true}.\hypertarget{a00856_autotoc_md162}{}\doxysubsubsubsubsection{\texorpdfstring{limit}{limit}}\label{a00856_autotoc_md162}
Controls the maximum request body size. If this is a number, then the value specifies the number of bytes; if it is a string, the value is passed to the \href{https://www.npmjs.com/package/bytes}{\texttt{ bytes}} library for parsing. Defaults to `\textquotesingle{}100kb'\`{}.\hypertarget{a00856_autotoc_md163}{}\doxysubsubsubsubsection{\texorpdfstring{type}{type}}\label{a00856_autotoc_md163}
The {\ttfamily type} option is used to determine what media type the middleware will parse. This option can be a string, array of strings, or a function. If not a function, {\ttfamily type} option is passed directly to the \href{https://www.npmjs.org/package/type-is\#readme}{\texttt{ type-\/is}} library and this can be an extension name (like {\ttfamily txt}), a mime type (like {\ttfamily text/plain}), or a mime type with a wildcard (like {\ttfamily \texorpdfstring{$\ast$}{*}/\texorpdfstring{$\ast$}{*}} or {\ttfamily text/\texorpdfstring{$\ast$}{*}}). If a function, the {\ttfamily type} option is called as {\ttfamily \doxylink{a00572_a2287243da4967181305b31f0ac827b66_a2287243da4967181305b31f0ac827b66}{fn(req)}} and the request is parsed if it returns a truthy value. Defaults to {\ttfamily text/plain}.\hypertarget{a00856_autotoc_md164}{}\doxysubsubsubsubsection{\texorpdfstring{verify}{verify}}\label{a00856_autotoc_md164}
The {\ttfamily verify} option, if supplied, is called as {\ttfamily verify(req, res, buf, encoding)}, where {\ttfamily buf} is a {\ttfamily Buffer} of the raw request body and {\ttfamily encoding} is the encoding of the request. The parsing can be aborted by throwing an error.\hypertarget{a00856_autotoc_md165}{}\doxysubsubsection{\texorpdfstring{body\+Parser.\+urlencoded(\mbox{[}options\mbox{]})}{body\+Parser.\+urlencoded(\mbox{[}options\mbox{]})}}\label{a00856_autotoc_md165}
Returns middleware that only parses {\ttfamily urlencoded} bodies and only looks at requests where the {\ttfamily Content-\/\+Type} header matches the {\ttfamily type} option. This parser accepts only UTF-\/8 encoding of the body and supports automatic inflation of {\ttfamily gzip} and {\ttfamily deflate} encodings.

\doxylink{a00844}{A} new {\ttfamily body} object containing the parsed data is populated on the {\ttfamily request} object after the middleware (i.\+e. {\ttfamily req.\+body}). This object will contain key-\/value pairs, where the value can be a string or array (when {\ttfamily extended} is {\ttfamily false}), or any type (when {\ttfamily extended} is {\ttfamily true}).\hypertarget{a00856_autotoc_md166}{}\doxysubsubsubsection{\texorpdfstring{Options}{Options}}\label{a00856_autotoc_md166}
The {\ttfamily urlencoded} function takes an optional {\ttfamily options} object that may contain any of the following keys\+:\hypertarget{a00856_autotoc_md167}{}\doxysubsubsubsubsection{\texorpdfstring{extended}{extended}}\label{a00856_autotoc_md167}
The {\ttfamily extended} option allows to choose between parsing the URL-\/encoded data with the {\ttfamily querystring} library (when {\ttfamily false}) or the {\ttfamily qs} library (when {\ttfamily true}). The "{}extended"{} syntax allows for rich objects and arrays to be encoded into the URL-\/encoded format, allowing for a JSON-\/like experience with URL-\/encoded. For more information, please \href{https://www.npmjs.org/package/qs\#readme}{\texttt{ see the qs library}}.

Defaults to {\ttfamily true}, but using the default has been deprecated. Please research into the difference between {\ttfamily qs} and {\ttfamily querystring} and choose the appropriate setting.\hypertarget{a00856_autotoc_md168}{}\doxysubsubsubsubsection{\texorpdfstring{inflate}{inflate}}\label{a00856_autotoc_md168}
When set to {\ttfamily true}, then deflated (compressed) bodies will be inflated; when {\ttfamily false}, deflated bodies are rejected. Defaults to {\ttfamily true}.\hypertarget{a00856_autotoc_md169}{}\doxysubsubsubsubsection{\texorpdfstring{limit}{limit}}\label{a00856_autotoc_md169}
Controls the maximum request body size. If this is a number, then the value specifies the number of bytes; if it is a string, the value is passed to the \href{https://www.npmjs.com/package/bytes}{\texttt{ bytes}} library for parsing. Defaults to `\textquotesingle{}100kb'\`{}.\hypertarget{a00856_autotoc_md170}{}\doxysubsubsubsubsection{\texorpdfstring{parameter\+Limit}{parameter\+Limit}}\label{a00856_autotoc_md170}
The {\ttfamily parameter\+Limit} option controls the maximum number of parameters that are allowed in the URL-\/encoded data. If a request contains more parameters than this value, a 413 will be returned to the client. Defaults to {\ttfamily 1000}.\hypertarget{a00856_autotoc_md171}{}\doxysubsubsubsubsection{\texorpdfstring{type}{type}}\label{a00856_autotoc_md171}
The {\ttfamily type} option is used to determine what media type the middleware will parse. This option can be a string, array of strings, or a function. If not a function, {\ttfamily type} option is passed directly to the \href{https://www.npmjs.org/package/type-is\#readme}{\texttt{ type-\/is}} library and this can be an extension name (like {\ttfamily urlencoded}), a mime type (like {\ttfamily application/x-\/www-\/form-\/urlencoded}), or a mime type with a wildcard (like {\ttfamily \texorpdfstring{$\ast$}{*}/x-\/www-\/form-\/urlencoded}). If a function, the {\ttfamily type} option is called as {\ttfamily \doxylink{a00572_a2287243da4967181305b31f0ac827b66_a2287243da4967181305b31f0ac827b66}{fn(req)}} and the request is parsed if it returns a truthy value. Defaults to {\ttfamily application/x-\/www-\/form-\/urlencoded}.\hypertarget{a00856_autotoc_md172}{}\doxysubsubsubsubsection{\texorpdfstring{verify}{verify}}\label{a00856_autotoc_md172}
The {\ttfamily verify} option, if supplied, is called as {\ttfamily verify(req, res, buf, encoding)}, where {\ttfamily buf} is a {\ttfamily Buffer} of the raw request body and {\ttfamily encoding} is the encoding of the request. The parsing can be aborted by throwing an error.\hypertarget{a00856_autotoc_md173}{}\doxysubsubsubsection{\texorpdfstring{depth}{depth}}\label{a00856_autotoc_md173}
The {\ttfamily depth} option is used to configure the maximum depth of the {\ttfamily qs} library when {\ttfamily extended} is {\ttfamily true}. This allows you to limit the amount of keys that are parsed and can be useful to prevent certain types of abuse. Defaults to {\ttfamily 32}. It is recommended to keep this value as low as possible.\hypertarget{a00856_autotoc_md174}{}\doxysubsection{\texorpdfstring{Errors}{Errors}}\label{a00856_autotoc_md174}
The middlewares provided by this module create errors using the \href{https://www.npmjs.com/package/http-errors}{\texttt{ {\ttfamily http-\/errors} module}}. The errors will typically have a {\ttfamily status}/{\ttfamily status\+Code} property that contains the suggested HTTP response code, an {\ttfamily expose} property to determine if the {\ttfamily message} property should be displayed to the client, a {\ttfamily type} property to determine the type of error without matching against the {\ttfamily message}, and a {\ttfamily body} property containing the read body, if available.

The following are the common errors created, though any error can come through for various reasons.\hypertarget{a00856_autotoc_md175}{}\doxysubsubsection{\texorpdfstring{content encoding unsupported}{content encoding unsupported}}\label{a00856_autotoc_md175}
This error will occur when the request had a {\ttfamily Content-\/\+Encoding} header that contained an encoding but the "{}inflation"{} option was set to {\ttfamily false}. The {\ttfamily status} property is set to {\ttfamily 415}, the {\ttfamily type} property is set to `\textquotesingle{}encoding.\+unsupported'{\ttfamily , and the}charset\`{} property will be set to the encoding that is unsupported.\hypertarget{a00856_autotoc_md176}{}\doxysubsubsection{\texorpdfstring{entity parse failed}{entity parse failed}}\label{a00856_autotoc_md176}
This error will occur when the request contained an entity that could not be parsed by the middleware. The {\ttfamily status} property is set to {\ttfamily 400}, the {\ttfamily type} property is set to `\textquotesingle{}entity.\+parse.\+failed'{\ttfamily , and the}body\`{} property is set to the entity value that failed parsing.\hypertarget{a00856_autotoc_md177}{}\doxysubsubsection{\texorpdfstring{entity verify failed}{entity verify failed}}\label{a00856_autotoc_md177}
This error will occur when the request contained an entity that could not be failed verification by the defined {\ttfamily verify} option. The {\ttfamily status} property is set to {\ttfamily 403}, the {\ttfamily type} property is set to `\textquotesingle{}entity.\+verify.\+failed'{\ttfamily , and the }body\`{} property is set to the entity value that failed verification.\hypertarget{a00856_autotoc_md178}{}\doxysubsubsection{\texorpdfstring{request aborted}{request aborted}}\label{a00856_autotoc_md178}
This error will occur when the request is aborted by the client before reading the body has finished. The {\ttfamily received} property will be set to the number of bytes received before the request was aborted and the {\ttfamily expected} property is set to the number of expected bytes. The {\ttfamily status} property is set to {\ttfamily 400} and {\ttfamily type} property is set to `\textquotesingle{}request.\+aborted'\`{}.\hypertarget{a00856_autotoc_md179}{}\doxysubsubsection{\texorpdfstring{request entity too large}{request entity too large}}\label{a00856_autotoc_md179}
This error will occur when the request body\textquotesingle{}s size is larger than the "{}limit"{} option. The {\ttfamily limit} property will be set to the byte limit and the {\ttfamily length} property will be set to the request body\textquotesingle{}s length. The {\ttfamily status} property is set to {\ttfamily 413} and the {\ttfamily type} property is set to `\textquotesingle{}entity.\+too.\+large'\`{}.\hypertarget{a00856_autotoc_md180}{}\doxysubsubsection{\texorpdfstring{request size did not match content length}{request size did not match content length}}\label{a00856_autotoc_md180}
This error will occur when the request\textquotesingle{}s length did not match the length from the {\ttfamily Content-\/\+Length} header. This typically occurs when the request is malformed, typically when the {\ttfamily Content-\/\+Length} header was calculated based on characters instead of bytes. The {\ttfamily status} property is set to {\ttfamily 400} and the {\ttfamily type} property is set to `\textquotesingle{}request.\+size.\+invalid'\`{}.\hypertarget{a00856_autotoc_md181}{}\doxysubsubsection{\texorpdfstring{stream encoding should not be set}{stream encoding should not be set}}\label{a00856_autotoc_md181}
This error will occur when something called the {\ttfamily req.\+set\+Encoding} method prior to this middleware. This module operates directly on bytes only and you cannot call {\ttfamily req.\+set\+Encoding} when using this module. The {\ttfamily status} property is set to {\ttfamily 500} and the {\ttfamily type} property is set to `\textquotesingle{}stream.\+encoding.\+set'\`{}.\hypertarget{a00856_autotoc_md182}{}\doxysubsubsection{\texorpdfstring{stream is not readable}{stream is not readable}}\label{a00856_autotoc_md182}
This error will occur when the request is no longer readable when this middleware attempts to read it. This typically means something other than a middleware from this module read the request body already and the middleware was also configured to read the same request. The {\ttfamily status} property is set to {\ttfamily 500} and the {\ttfamily type} property is set to `\textquotesingle{}stream.\+not.\+readable'\`{}.\hypertarget{a00856_autotoc_md183}{}\doxysubsubsection{\texorpdfstring{too many parameters}{too many parameters}}\label{a00856_autotoc_md183}
This error will occur when the content of the request exceeds the configured {\ttfamily parameter\+Limit} for the {\ttfamily urlencoded} parser. The {\ttfamily status} property is set to {\ttfamily 413} and the {\ttfamily type} property is set to `\textquotesingle{}parameters.\+too.\+many'\`{}.\hypertarget{a00856_autotoc_md184}{}\doxysubsubsection{\texorpdfstring{unsupported charset "{}\+BOGUS"{}}{unsupported charset "{}\+BOGUS"{}}}\label{a00856_autotoc_md184}
This error will occur when the request had a charset parameter in the {\ttfamily Content-\/\+Type} header, but the {\ttfamily iconv-\/lite} module does not support it OR the parser does not support it. The charset is contained in the message as well as in the {\ttfamily charset} property. The {\ttfamily status} property is set to {\ttfamily 415}, the {\ttfamily type} property is set to `\textquotesingle{}charset.\+unsupported'{\ttfamily , and the}charset\`{} property is set to the charset that is unsupported.\hypertarget{a00856_autotoc_md185}{}\doxysubsubsection{\texorpdfstring{unsupported content encoding "{}bogus"{}}{unsupported content encoding "{}bogus"{}}}\label{a00856_autotoc_md185}
This error will occur when the request had a {\ttfamily Content-\/\+Encoding} header that contained an unsupported encoding. The encoding is contained in the message as well as in the {\ttfamily encoding} property. The {\ttfamily status} property is set to {\ttfamily 415}, the {\ttfamily type} property is set to `\textquotesingle{}encoding.\+unsupported'{\ttfamily , and the}encoding\`{} property is set to the encoding that is unsupported.\hypertarget{a00856_autotoc_md186}{}\doxysubsubsection{\texorpdfstring{The input exceeded the depth}{The input exceeded the depth}}\label{a00856_autotoc_md186}
This error occurs when using {\ttfamily body\+Parser.\+urlencoded} with the {\ttfamily extended} property set to {\ttfamily true} and the input exceeds the configured {\ttfamily depth} option. The {\ttfamily status} property is set to {\ttfamily 400}. It is recommended to review the {\ttfamily depth} option and evaluate if it requires a higher value. When the {\ttfamily depth} option is set to {\ttfamily 32} (default value), the error will not be thrown.\hypertarget{a00856_autotoc_md187}{}\doxysubsection{\texorpdfstring{Examples}{Examples}}\label{a00856_autotoc_md187}
\hypertarget{a00856_autotoc_md188}{}\doxysubsubsection{\texorpdfstring{Express/\+Connect top-\/level generic}{Express/\+Connect top-\/level generic}}\label{a00856_autotoc_md188}
This example demonstrates adding a generic JSON and URL-\/encoded parser as a top-\/level middleware, which will parse the bodies of all incoming requests. This is the simplest setup.


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ \mbox{\hyperlink{a01369_af0deccff0ccdd703412620ba83155b82_af0deccff0ccdd703412620ba83155b82}{express}}\ =\ require(\textcolor{stringliteral}{'express'})}
\DoxyCodeLine{var\ \mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}\ =\ require('body-\/\mbox{\hyperlink{a00197_a04bd013037bcf380d2d5e88fcd9a2ebf_a04bd013037bcf380d2d5e88fcd9a2ebf}{parser}}')}
\DoxyCodeLine{}
\DoxyCodeLine{var\ \mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}\ =\ \mbox{\hyperlink{a01369_af0deccff0ccdd703412620ba83155b82_af0deccff0ccdd703412620ba83155b82}{express}}()}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ parse\ application/x-\/www-\/form-\/urlencoded}}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.\mbox{\hyperlink{a00101_a8192500ed5d08ae60d3778b54729bd51_a8192500ed5d08ae60d3778b54729bd51}{use}}(\mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}.urlencoded(\{\ extended:\ \textcolor{keyword}{false}\ \}))}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ parse\ application/json}}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.use(\mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}.json())}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.use(function\ (\mbox{\hyperlink{a00104_a42c43c76081a7df8ae2954f16ee9338b_a42c43c76081a7df8ae2954f16ee9338b}{req}},\ \mbox{\hyperlink{a00104_abde3c35e3bb7e5225dd7f234c685329c_abde3c35e3bb7e5225dd7f234c685329c}{res}})\ \{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{a00104_abde3c35e3bb7e5225dd7f234c685329c_abde3c35e3bb7e5225dd7f234c685329c}{res}}.setHeader(\textcolor{stringliteral}{'Content-\/Type'},\ \textcolor{stringliteral}{'text/plain'})}
\DoxyCodeLine{\ \ \mbox{\hyperlink{a00104_abde3c35e3bb7e5225dd7f234c685329c_abde3c35e3bb7e5225dd7f234c685329c}{res}}.write(\textcolor{stringliteral}{'you\ posted:\(\backslash\)n'})}
\DoxyCodeLine{\ \ \mbox{\hyperlink{a00104_abde3c35e3bb7e5225dd7f234c685329c_abde3c35e3bb7e5225dd7f234c685329c}{res}}.end(\mbox{\hyperlink{a00320_a5c2083d67680a698a2c2d545b649a6f5_a5c2083d67680a698a2c2d545b649a6f5}{JSON}}.stringify(\mbox{\hyperlink{a00104_a42c43c76081a7df8ae2954f16ee9338b_a42c43c76081a7df8ae2954f16ee9338b}{req}}.body,\ \textcolor{keyword}{null},\ 2))}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{a00856_autotoc_md189}{}\doxysubsubsection{\texorpdfstring{Express route-\/specific}{Express route-\/specific}}\label{a00856_autotoc_md189}
This example demonstrates adding body parsers specifically to the routes that need them. In general, this is the most recommended way to use body-\/parser with Express.


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ \mbox{\hyperlink{a01369_af0deccff0ccdd703412620ba83155b82_af0deccff0ccdd703412620ba83155b82}{express}}\ =\ require(\textcolor{stringliteral}{'express'})}
\DoxyCodeLine{var\ \mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}\ =\ require('body-\/\mbox{\hyperlink{a00197_a04bd013037bcf380d2d5e88fcd9a2ebf_a04bd013037bcf380d2d5e88fcd9a2ebf}{parser}}')}
\DoxyCodeLine{}
\DoxyCodeLine{var\ \mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}\ =\ \mbox{\hyperlink{a01369_af0deccff0ccdd703412620ba83155b82_af0deccff0ccdd703412620ba83155b82}{express}}()}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ create\ application/json\ parser}}
\DoxyCodeLine{var\ jsonParser\ =\ \mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}.\mbox{\hyperlink{a00104_ac6fdc7f7005e375dc7d7dce4bc785ab4_ac6fdc7f7005e375dc7d7dce4bc785ab4}{json}}()}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ create\ application/x-\/www-\/form-\/urlencoded\ parser}}
\DoxyCodeLine{var\ urlencodedParser\ =\ \mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}.urlencoded(\{\ extended:\ \textcolor{keyword}{false}\ \})}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ POST\ /login\ gets\ urlencoded\ bodies}}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.post(\textcolor{stringliteral}{'/login'},\ urlencodedParser,\ \textcolor{keyword}{function}\ (\mbox{\hyperlink{a00104_a42c43c76081a7df8ae2954f16ee9338b_a42c43c76081a7df8ae2954f16ee9338b}{req}},\ \mbox{\hyperlink{a00104_abde3c35e3bb7e5225dd7f234c685329c_abde3c35e3bb7e5225dd7f234c685329c}{res}})\ \{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{a00104_abde3c35e3bb7e5225dd7f234c685329c_abde3c35e3bb7e5225dd7f234c685329c}{res}}.send(\textcolor{stringliteral}{'welcome,\ '}\ +\ \mbox{\hyperlink{a00104_a42c43c76081a7df8ae2954f16ee9338b_a42c43c76081a7df8ae2954f16ee9338b}{req}}.body.username)}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ POST\ /api/users\ gets\ JSON\ bodies}}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.post(\textcolor{stringliteral}{'/api/users'},\ jsonParser,\ \textcolor{keyword}{function}\ (\mbox{\hyperlink{a00104_a42c43c76081a7df8ae2954f16ee9338b_a42c43c76081a7df8ae2954f16ee9338b}{req}},\ \mbox{\hyperlink{a00104_abde3c35e3bb7e5225dd7f234c685329c_abde3c35e3bb7e5225dd7f234c685329c}{res}})\ \{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ create\ user\ in\ req.body}}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{a00856_autotoc_md190}{}\doxysubsubsection{\texorpdfstring{Change accepted type for parsers}{Change accepted type for parsers}}\label{a00856_autotoc_md190}
All the parsers accept a {\ttfamily type} option which allows you to change the {\ttfamily Content-\/\+Type} that the middleware will parse.


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ \mbox{\hyperlink{a01369_af0deccff0ccdd703412620ba83155b82_af0deccff0ccdd703412620ba83155b82}{express}}\ =\ require(\textcolor{stringliteral}{'express'})}
\DoxyCodeLine{var\ \mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}\ =\ require('body-\/\mbox{\hyperlink{a00197_a04bd013037bcf380d2d5e88fcd9a2ebf_a04bd013037bcf380d2d5e88fcd9a2ebf}{parser}}')}
\DoxyCodeLine{}
\DoxyCodeLine{var\ \mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}\ =\ \mbox{\hyperlink{a01369_af0deccff0ccdd703412620ba83155b82_af0deccff0ccdd703412620ba83155b82}{express}}()}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ parse\ various\ different\ custom\ JSON\ types\ as\ JSON}}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.\mbox{\hyperlink{a00101_a8192500ed5d08ae60d3778b54729bd51_a8192500ed5d08ae60d3778b54729bd51}{use}}(\mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}.\mbox{\hyperlink{a00104_ac6fdc7f7005e375dc7d7dce4bc785ab4_ac6fdc7f7005e375dc7d7dce4bc785ab4}{json}}(\{\ \mbox{\hyperlink{a00209_affea7e61106a6a9da029c8af702aaf20_affea7e61106a6a9da029c8af702aaf20}{type}}:\ \textcolor{stringliteral}{'application/*+json'}\ \}))}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ parse\ some\ custom\ thing\ into\ a\ Buffer}}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.use(\mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}.raw(\{\ type:\ \textcolor{stringliteral}{'application/vnd.custom-\/type'}\ \}))}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ parse\ an\ HTML\ body\ into\ a\ string}}
\DoxyCodeLine{\mbox{\hyperlink{a00101_a7b225fcb720e4d5ed2bbf60e28a25e6d_a7b225fcb720e4d5ed2bbf60e28a25e6d}{app}}.use(\mbox{\hyperlink{a00104_a2f18df3edfa1cab06177ab4917a1d17e_a2f18df3edfa1cab06177ab4917a1d17e}{bodyParser}}.text(\{\ type:\ \textcolor{stringliteral}{'text/html'}\ \}))}

\end{DoxyCode}
\hypertarget{a00856_autotoc_md191}{}\doxysubsection{\texorpdfstring{License}{License}}\label{a00856_autotoc_md191}
\mbox{[}MIT\mbox{]}(LICENSE) 