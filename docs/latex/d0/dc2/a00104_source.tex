\doxysubsection{mediacion\+Model.\+js}
\label{a00104_source}\index{mediacionModel.js@{mediacionModel.js}}
\textbf{ Ir a la documentaciÃ³n de este archivo.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ src/models/medicionModel.js}}
\DoxyCodeLine{00002\ \textcolor{keyword}{import}\ pool\ from\ \textcolor{stringliteral}{'../config/db.js'};}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00021\ export\ \textcolor{keyword}{const}\ getMediciones\ =\ async\ (filters)\ =>\ \{}
\DoxyCodeLine{00022\ \ \ \ \ let\ query\ =\ \textcolor{stringliteral}{'SELECT\ *\ FROM\ mediciones\ WHERE\ 1=1'};}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keyword}{const}\ params\ =\ [];}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keywordflow}{if}\ (filters.lugar)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ lugar\ =\ ?'};}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ params.push(filters.lugar);}
\DoxyCodeLine{00028\ \ \ \ \ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordflow}{if}\ (filters.tipo\_gas)\ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ tipo\_gas\ =\ ?'};}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ params.push(filters.tipo\_gas);}
\DoxyCodeLine{00033\ \ \ \ \ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordflow}{if}\ (filters.desde\_hora)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ hora\ >=\ ?'};}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ params.push(filters.desde\_hora);}
\DoxyCodeLine{00038\ \ \ \ \ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordflow}{if}\ (filters.hasta\_hora)\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ hora\ <=\ ?'};}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ params.push(filters.hasta\_hora);}
\DoxyCodeLine{00043\ \ \ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{const}\ [rows]\ =\ await\ pool.query(query,\ params);}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordflow}{return}\ rows;}
\DoxyCodeLine{00047\ \};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00062\ export\ \textcolor{keyword}{const}\ insertMedicion\ =\ async\ (medicion)\ =>\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{const}\ \{\ medida,\ lugar,\ tipo\_gas,\ hora\ \}\ =\ medicion;}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{const}\ query\ =\ \textcolor{stringliteral}{'INSERT\ INTO\ mediciones\ (medida,\ lugar,\ tipo\_gas,\ hora)\ VALUES\ (?,\ ?,\ ?,\ ?)'};}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{const}\ [result]\ =\ await\ pool.execute(query,\ [medida,\ lugar,\ tipo\_gas,\ hora]);}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordflow}{return}\ result.insertId;}
\DoxyCodeLine{00067\ \};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00077\ export\ \textcolor{keyword}{const}\ getUltimaMedicion\ =\ async\ ()\ =>\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{const}\ query\ =\ \textcolor{stringliteral}{'SELECT\ *\ FROM\ mediciones\ ORDER\ BY\ hora\ DESC\ LIMIT\ 1'};}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{const}\ [rows]\ =\ await\ pool.query(query);}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ rows[0];}
\DoxyCodeLine{00081\ \};}

\end{DoxyCode}
