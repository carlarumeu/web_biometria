\doxysubsection{Referencia del archivo mediacion\+Model.\+js}
\label{a00104}\index{mediacionModel.js@{mediacionModel.js}}
\doxysubsubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\textbf{ import} \textbf{ pool} from config db \textbf{ js}
\item 
export const \textbf{ get\+Mediciones}
\begin{DoxyCompactList}\small\item\em @function get\+Mediciones @async \end{DoxyCompactList}\item 
export const \textbf{ insert\+Medicion}
\begin{DoxyCompactList}\small\item\em @function insert\+Medicion @async \end{DoxyCompactList}\item 
export const \textbf{ get\+Ultima\+Medicion}
\begin{DoxyCompactList}\small\item\em @function get\+Ultima\+Medicion @async \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsection{Documentación de variables}
\index{mediacionModel.js@{mediacionModel.js}!getMediciones@{getMediciones}}
\index{getMediciones@{getMediciones}!mediacionModel.js@{mediacionModel.js}}
\doxyparagraph{getMediciones}
{\footnotesize\ttfamily \label{a00104_a39f96dc7b51d953e4e65a08564e73d5a_a39f96dc7b51d953e4e65a08564e73d5a} 
export const get\+Mediciones}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ (filters)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ let\ query\ =\ \textcolor{stringliteral}{'SELECT\ *\ FROM\ mediciones\ WHERE\ 1=1'};}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ params\ =\ [];}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (filters.lugar)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ lugar\ =\ ?'};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ params.push(filters.lugar);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (filters.tipo\_gas)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ tipo\_gas\ =\ ?'};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ params.push(filters.tipo\_gas);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (filters.desde\_hora)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ hora\ >=\ ?'};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ params.push(filters.desde\_hora);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (filters.hasta\_hora)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ query\ +=\ \textcolor{stringliteral}{'\ AND\ hora\ <=\ ?'};}
\DoxyCodeLine{\ \ \ \ \ \ \ \ params.push(filters.hasta\_hora);}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ [rows]\ =\ await\ pool.query(query,\ params);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ rows;}
\DoxyCodeLine{\}}

\end{DoxyCode}


@function get\+Mediciones @async 


\begin{DoxyParams}{Parámetros}
{\em \{\+Object\}} & filters -\/ Filtros para las mediciones. \\
\hline
{\em \{string\}} & [filters.\+lugar] -\/ Lugar de la medición. \\
\hline
{\em \{string\}} & [filters.\+tipo\+\_\+gas] -\/ Tipo de gas de la medición. \\
\hline
{\em \{string\}} & [filters.\+desde\+\_\+hora] -\/ Hora de inicio para el filtro de mediciones. \\
\hline
{\em \{string\}} & [filters.\+hasta\+\_\+hora] -\/ Hora de fin para el filtro de mediciones. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
\{Promise$<$\+Array$<$\+Object$>$$>$\} Lista de mediciones que cumplen con los filtros especificados. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Excepciones}
{\em \{\+Error\}} & Si ocurre un error durante la consulta a la base de datos. \\
\hline
\end{DoxyExceptions}


Definición en la línea \textbf{ 21} del archivo \textbf{ mediacion\+Model.\+js}.

\index{mediacionModel.js@{mediacionModel.js}!getUltimaMedicion@{getUltimaMedicion}}
\index{getUltimaMedicion@{getUltimaMedicion}!mediacionModel.js@{mediacionModel.js}}
\doxyparagraph{getUltimaMedicion}
{\footnotesize\ttfamily \label{a00104_a506c19b39343a5688cf622b036cdddd7_a506c19b39343a5688cf622b036cdddd7} 
export const get\+Ultima\+Medicion}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ ()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ query\ =\ \textcolor{stringliteral}{'SELECT\ *\ FROM\ mediciones\ ORDER\ BY\ hora\ DESC\ LIMIT\ 1'};}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ [rows]\ =\ await\ pool.query(query);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ rows[0];}
\DoxyCodeLine{\}}

\end{DoxyCode}


@function get\+Ultima\+Medicion @async 

\begin{DoxyReturn}{Devuelve}
\{Promise$<$Object$\vert$null$>$\} La última medición registrada, o null si no hay mediciones. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Excepciones}
{\em \{\+Error\}} & Si ocurre un error durante la consulta a la base de datos. \\
\hline
\end{DoxyExceptions}


Definición en la línea \textbf{ 77} del archivo \textbf{ mediacion\+Model.\+js}.

\index{mediacionModel.js@{mediacionModel.js}!insertMedicion@{insertMedicion}}
\index{insertMedicion@{insertMedicion}!mediacionModel.js@{mediacionModel.js}}
\doxyparagraph{insertMedicion}
{\footnotesize\ttfamily \label{a00104_a6fe4e602e4a604876ec3d59fd73dd8c5_a6fe4e602e4a604876ec3d59fd73dd8c5} 
export const insert\+Medicion}

{\bfseries Valor inicial\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ async\ (medicion)\ =>\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ \{\ medida,\ lugar,\ tipo\_gas,\ hora\ \}\ =\ medicion;}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ query\ =\ \textcolor{stringliteral}{'INSERT\ INTO\ mediciones\ (medida,\ lugar,\ tipo\_gas,\ hora)\ VALUES\ (?,\ ?,\ ?,\ ?)'};}
\DoxyCodeLine{\ \ \ \ \textcolor{keyword}{const}\ [result]\ =\ await\ pool.execute(query,\ [medida,\ lugar,\ tipo\_gas,\ hora]);}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ result.insertId;}
\DoxyCodeLine{\}}

\end{DoxyCode}


@function insert\+Medicion @async 


\begin{DoxyParams}{Parámetros}
{\em \{\+Object\}} & medicion -\/ Objeto que contiene los datos de la medición a insertar. \\
\hline
{\em \{number\}} & medicion.\+medida -\/ Valor de la medición. \\
\hline
{\em \{string\}} & medicion.\+lugar -\/ Lugar de la medición. \\
\hline
{\em \{string\}} & medicion.\+tipo\+\_\+gas -\/ Tipo de gas de la medición. \\
\hline
{\em \{string\}} & medicion.\+hora -\/ Hora en la que se realizó la medición. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Devuelve}
\{Promise$<$number$>$\} ID de la medición insertada. 
\end{DoxyReturn}

\begin{DoxyExceptions}{Excepciones}
{\em \{\+Error\}} & Si ocurre un error durante la inserción en la base de datos. \\
\hline
\end{DoxyExceptions}


Definición en la línea \textbf{ 62} del archivo \textbf{ mediacion\+Model.\+js}.

\index{mediacionModel.js@{mediacionModel.js}!js@{js}}
\index{js@{js}!mediacionModel.js@{mediacionModel.js}}
\doxyparagraph{js}
{\footnotesize\ttfamily \label{a00104_aa10fb6863dca783341cf3ea63763a6fa_aa10fb6863dca783341cf3ea63763a6fa} 
\textbf{ import} \textbf{ pool} from config db js}



Definición en la línea \textbf{ 2} del archivo \textbf{ mediacion\+Model.\+js}.

